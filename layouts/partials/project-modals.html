{{ "<!-- Portfolio Modals -->" | safeHTML }}
{{ $lang := .Site.Language.Lang }}
{{ range $projectIndex, $project := .Site.Data.projects }}
<div class="projects-modal modal fade" id="portfolioModal{{ $project.modalID }}" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-content col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
        <div class="close-modal" data-dismiss="modal">
            <div class="lr">
                <div class="rl">
                </div>
            </div>
        </div>
        <div class="col-sm-10 col-sm-offset-1 modal-body">
            <div class="modal-title">
                <h3 class="section-heading">{{ index $project.title $lang }}</h3>
                <div>
                    <hr/>
                </div>
                <h5>
                    <div>{{ index $project.date $lang }}</div>
                    <div>{{ index $project.place $lang}}</div>
                </h5>

                <div style="margin-bottom:30px;">
                    {{ if (or $project.video $project.models) }}
                         <a role="button" 
                             data-toggle="collapse"
                             href="#project-{{ $projectIndex }}-img-carousel"
                             data-parent='#project-{{$projectIndex}}-accordion'
                             aria-expanded="true">
                             Image
                         </a>
                         {{ if $project.video }}
                             <a role="button" 
                                 data-toggle="collapse"
                                 href="#project-{{ $projectIndex }}-video-carousel"
                                 data-parent='#project-{{$projectIndex}}-accordion'
                                 aria-expanded="false">
                                 Video
                             </a>
                         {{ end }}
                         {{ if $project.models }}
                             <a role="button" 
                                 data-toggle="collapse"
                                 href="#project-{{ $projectIndex }}-models-carousel"
                                 data-parent='#project-{{$projectIndex}}-accordion'
                                 aria-expanded="false">
                                 3D
                             </a>
                         {{ end }}
                    {{ end }}
                </div>


                <div class="project-accordion-container">
                    {{ with (index $project.img 0) }}
                        <img class="img-responsive" src="{{ .src }}" style='opacity: 0;'>
                    {{ end }}
                    <div class="panel-group project-accordion" id="project-{{$projectIndex}}-accordion" role="tablist" aria-multiselectable="false">

                        {{ "<!-- Image carousel -->" | safeHTML }}
                        <div class="panel">
                            <div id="project-{{ $projectIndex }}-img-carousel" class="panel-collapse collapse in" role="tabpanel">
                                <div class="owl-carousel">
                                    {{ range $project.img }}
                                        <div>
                                            <img src="{{ .src }}" class="img-responsive">
                                            <div class="img-caption">{{ index .caption $lang }}</div>
                                        </div>
                                    {{ end }}
                                </div>
                            </div>
                        </div>

                        {{ "<!-- Video carousel -->" | safeHTML }}
                        {{ if $project.video }}
                        <div class="panel">
                            <div id="project-{{ $projectIndex }}-video-carousel" class="panel-collapse collapse" role="tabpanel">
                                <div class="owl-carousel">
                                    {{ range $project.video }}
                                        <div>
                                            <img src="{{ . }}" class="img-responsive">
                                            <div style="position: absolute;z-index: 2;color:white;font-size:50px;top:50%;left:50%;transform:translateX(-50%) translateY(-50%)">VIDEO</div>
                                        </div>
                                    {{ end }}
                                </div>
                            </div>
                        </div>
                        {{ end }}

                        {{ "<!-- 3D models carousel -->" | safeHTML }}
                        {{ if $project.models }}
                        <div class="panel">
                            <div id="project-{{ $projectIndex }}-models-carousel" class="panel-collapse collapse" role="tabpanel">
                                <div class="owl-carousel">
                                    {{ range $project.models }}
                                        <div>
                                            <img src="{{ . }}" class="img-responsive">
                                            <div style="position: absolute;z-index: 2;color:white;font-size:50px;top:50%;left:50%;transform:translateX(-50%) translateY(-50%)">3D</div>
                                        </div>
                                    {{ end }}
                                </div>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            <div class="modal-description">
                <p class="text-justify">{{ index $project.description $lang | markdownify }}</p>
            </div>
        </div>
    </div>
</div>
{{ end }}
