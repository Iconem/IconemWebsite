{{ "<!-- Portfolio Modals -->" | safeHTML }}
{{ $lang := .Site.Language.Lang }}
{{ range $projectIndex, $project := .Site.Data.projects }}
<div class="projects-modal modal fade" id="portfolioModal{{ $project.modalID }}" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-content col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
        <div class="close-modal" data-dismiss="modal">
            <div class="lr">
                <div class="rl">
                </div>
            </div>
        </div>
        <div class="col-sm-10 col-sm-offset-1 modal-body">
            <div class="modal-title">
                <h3 class="section-heading">{{ index $project.title $lang }}</h3>
                <div>
                    <hr/>
                </div>
                <h5>
                    <div>{{ index $project.date $lang }}</div>
                    <div>{{ index $project.place $lang}}</div>
                </h5>

                {{ "<!-- Image carousel -->" | safeHTML }}
                <div class="owl-carousel carousel">
                    {{ range $project.img }}
                    <img src="{{ . }}" class="img-responsive">
                    {{ end }}
                </div>

                {{ "<!-- Video carousel -->" | safeHTML }}
                <!-- {{ if $project.video }}
                    <div class="owl-carousel carousel">
                        {{ range $project.video }}
                        <img src="{{ . }}" class="img-responsive">
                        {{ end }}
                    </div>
                {{ end }} -->

                {{ "<!-- 3D Models carousel -->" | safeHTML }}
                <!-- {{ if $project.models }}
                    <div class="owl-carousel carousel">
                        {{ range $project.img }}
                        <img src="{{ . }}" class="img-responsive">
                        {{ end }}
                    </div>
                {{ end }} -->

               <div style="margin-bottom:30px;">
                   {{ if (or $project.video $project.models) }}
                        <button>Image</button>
                        {{ if $project.video }}
                            <button>Video</button>
                        {{ end }}
                        {{ if $project.models }}
                            <button>3D</button>
                        {{ end }}
                   {{ end }}
               </div>

            </div>
            <div class="modal-description">
                <p class="text-justify">{{ index $project.description $lang | markdownify }}</p>
            </div>
        </div>
    </div>
</div>
{{ end }}

<script type="text/javascript">
    function display(projectId, type, firstIndexOfType) {
        var carouselId = '#carousel-example-generic-' + projectId;
        var carouselElement = $(carouselId);

        // remove class type-active from every type icon
        carouselElement
            .find('.carousel-type-indicators')
            .find('li')
            .removeClass('type-active');

        // add class type-active to selected type icon
        carouselElement
            .find('.carousel-type-' + type)
            .addClass('type-active');

        // modify type element content
        var textType = '';
        switch (type) {
            case 'img':
                textType = 'Pictures';
                break;
            case 'video':
                textType = 'Videos';
                break;
            case '3ds':
                textType = '3Ds';
                break;
            default:
                break;
        }
        carouselElement
            .find('.carousel-type')
            .text(textType);

        // set display:none for all carousel indicators
        carouselElement
            .find('.carousel-indicators:not(.carousel-type-indicators)')
            .find('li')
            .css('display', 'none');

        // set display:block for all indicators corresponding to $type
        carouselElement
            .find('.carousel-indicator-' + type)
            .css('display', 'inline-block');

        // slides carousel to first element of correspont $type
        carouselElement.carousel(firstIndexOfType);
    }
</script>
